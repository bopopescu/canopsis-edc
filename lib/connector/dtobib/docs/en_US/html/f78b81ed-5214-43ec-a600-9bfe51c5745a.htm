<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Installing the Microsoft SQL Server ODBC Driver for Linux</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="f78b81ed-5214-43ec-a600-9bfe51c5745a" /><meta name="Description" content="This topic will explain how to install the Microsoft SQL Server ODBC Driver for Linux. Before you can begin to use the driver, you will first need to install the unixODBC driver manager. See Installing the Driver Manager for more information." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><link rel="stylesheet" type="text/css" href="../local/Classic.css" /><script type="text/javascript" src="../scripts/EventUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/SplitScreen.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/Dropdown.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_manifold.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_feedBack.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CheckboxMenu.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CommonUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../local/script_main.js">&amp;nbsp;</script></head><body><div id="header"><table id="bottomTable" cellpadding="0" cellspacing="0"><tr><td align="left"><span id="headerBold">Installing the Microsoft SQL Server ODBC Driver for Linux</span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><font color="DarkGray"><p /></font><div class="introduction"><p>This topic will explain how to install the Microsoft SQL Server ODBC Driver for Linux. Before you can begin to use the driver, you will first need to install the unixODBC driver manager. See <span sdata="link"><a href="7c4b6fb4-f45a-4973-adb9-a4d83f0a2a7a.htm">Installing the Driver Manager</a></span> for more information.</p></div><h1 class="heading">Installation Steps</h1><div id="sectionSection0" class="section" name="collapseableSection" style=""><p>To install the driver:</p><ol><li><p>Make sure you have root permission.</p></li><li><p>Change to the directory where the SQL Server ODBC Driver placed the file called sqlncli-11.0.1790.0.tar.gz (make sure that you have the *.tar.gz file that matches your version of Red Hat Enterprise Linux). Run the following command to extract the files: <b>tar xvzf sqlncli-11.0.1790.0.tar.gz</b>.</p></li><li><p>Change to the sqlncli-11.0.1790.0 directory and there you should see a file called install.sh. You can run install.sh to install the SQL Server ODBC Driver for Linux.</p></li><li><p>Execute the following command to see a list of the available options: <b>./install.sh</b>.</p></li><li><p>You may want to make a backup of <b>odbcinst.ini</b>. The driver installation will update <b>odbcinst.ini</b>. odbcinst.ini contains the list of drivers that are registered with the unixODBC Driver Manager. Execute the following command to discover the location of odbcinst.ini on your computer: <b>odbc_config --odbcinstini</b>.</p></li><li><p>Before you install the driver, execute the following command: <b>./install.sh verify</b>. The output of <b>./install.sh verify</b> will indicate if your computer has the required software to support the SQL Server ODBC Driver for Linux.</p></li><li><p>When you are ready to install the SQL Server ODBC Driver for Linux, execute the command: <b>./install.sh install</b>. If you need to specify an install command (<b>bin-dir</b> or <b>lib-dir</b>), specify the command after the <b>install</b> option.</p></li><li><p>After reviewing the license agreement, type <b>YES</b> to continue with the installation.</p></li></ol><p>The driver will be installed in /opt/Microsoft/sqlncli/11.0.1790.0. For version 1, the driver is required to be in /opt/Microsoft/sqlncli/11.0.1790.0.</p><p>Run the following command to verify that the SQL Server ODBC Driver for Linux was registered successfully: <b>odbcinst -q -d -n "SQL Server Native Client 11.0"</b></p><p><a href="http://blogs.msdn.com/b/sqlblog/archive/2012/01/26/use-existing-msdn-c-odbc-samples-for-microsoft-linux-odbc-driver.aspx">Use Existing MSDN C++ ODBC Samples for Microsoft Linux ODBC Driver</a> shows a code sample that connects to SQL Server using the SQL Server ODBC Driver for Linux.</p></div><h1 class="heading">Troubleshooting Connection Problems</h1><div id="sectionSection1" class="section" name="collapseableSection" style=""><p>If you are unable to make a connection to SQL Server using the SQL Server ODBC Driver for Linux, the following information may help you identify the problem.</p><p>The most common connection problem is to have two copies of the UnixODBC Driver Manager installed.  Search /usr for libodbc*.so*. If you see more than one version of the file, you may have more than one driver manager installed and your application may be using the wrong version.  Another problem could be if you see the UnixODBC Driver Manager installed package when you execute the command <b>yum list  unixODBC</b>. </p><p>Enable the connection log by verifying that your odbcinst.ini file contains the section and items listed below:</p><div class="sampleCode"><span codeLanguage="other"><pre>[ODBC]
Trace = Yes
TraceFile = (your log file)</pre></span></div><p>If you enable the connection log and get another connection failure, and if you do not see a log file, there may be two copies of the driver manager on your computer. Otherwise, the log output should be similar to the following:</p><div class="sampleCode"><span codeLanguage="other"><pre>[ODBC][28783][1321576347.077780][SQLDriverConnectW.c][290]
        Entry:
            Connection = 0x17c858e0
            Window Hdl = (nil)
            Str In = [DRIVER={SQL Server Native Client 11.0};SERVER={algsql.sys-sqlsvr.local,2866};Trusted_Connection={YES};WSID={alg_rhel6};AP...][length = 139 (SQL_NTS)]
            Str Out = (nil)
            Str Out Max = 0
            Str Out Ptr = (nil)
            Completion = 0
        UNICODE Using encoding ASCII 'UTF8' and UNICODE 'UTF16LE'</pre></span></div><p>If the character encoding is not UTF-8, for example:</p><div class="sampleCode"><span codeLanguage="other"><pre>UNICODE Using encoding ASCII 'ISO8859-1' and UNICODE 'UCS-2LE'</pre></span></div><p>There might be more than one Driver Manager installed and your application is not using the one required by the SQL Server ODBC Driver for Linux.  Or, the Driver Manager was not built correctly.</p><p>For more information about resolving connection failures, see:</p><ul><li><p><a href="http://blogs.msdn.com/b/sql_protocols/archive/2008/04/30/steps-to-troubleshoot-connectivity-issues.aspx">Steps to troubleshoot SQL connectivity issues</a></p></li><li><p><a href="http://blogs.msdn.com/b/sql_protocols/archive/2005/10/22/sql-server-2005-connectivity-issue-troubleshoot-part-i.aspx">SQL Server 2005 Connectivity Issue Troubleshoot - Part I</a></p></li><li><p><a href="http://blogs.msdn.com/b/sql_protocols/archive/2008/05/20/connectivity-troubleshooting-in-sql-server-2008-with-the-connectivity-ring-buffer.aspx">Connectivity troubleshooting in SQL Server 2008 with the Connectivity Ring Buffer</a></p></li><li><p><a href="http://blogs.msdn.com/b/sqlsecurity/archive/2010/03/29/sql-server-authentication-troubleshooter.aspx">SQL Server Authentication Troubleshooter</a></p></li><li><p><a href="http://www.microsoft.com/products/ee/transform.aspx?ProdName=Microsoft+SQL+Server&amp;EvtSrc=MSSQLServer&amp;EvtID=11001">Error details (http://www.microsoft.com/products/ee/transform.aspx?ProdName=Microsoft+SQL+Server&amp;EvtSrc=MSSQLServer&amp;EvtID=11001)</a></p><p>The error number specified in the URL (11001) should be changed to match the error that you see.</p></li></ul></div><h1 class="heading">Uninstalling the SQL Server ODBC Driver for Linux</h1><div id="sectionSection2" class="section" name="collapseableSection" style=""><p>You can uninstall the SQL Server ODBC Driver for Linux, by executing the following commands:</p><ol><li><p>rm –f /usr/bin/sqlcmd</p></li><li><p>rm –f /usr/bin/bcp</p></li><li><p>rm –rf /opt/Microsoft/sqlncli</p></li><li><p>odbcinst –u –d –n "SQL Server Native Client 11.0"</p></li></ol></div><span id="seeAlsoSpan"><h1 class="heading">See Also</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><span sdata="link"><a href="a0ff66dd-7c8f-49f2-94c6-9d1b900d8aea.htm">Welcome to the Microsoft SQL Server ODBC Driver for Linux</a></span></div></div></div><div id="footer" class="section"><span id="copyrightarea"><br /><p><a href="f0fb316e-315e-4144-9837-67053801f83c.htm">© 2012 Microsoft.  All rights reserved.</a></p></span></div></div></body></html>